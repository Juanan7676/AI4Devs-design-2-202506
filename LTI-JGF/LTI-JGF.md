## üß† **Nombre del producto: TalentFlow**

### üìÑ **Descripci√≥n breve del software**

**TalentFlow** es un sistema de seguimiento de candidatos (ATS) moderno y f√°cil de usar, dise√±ado para ayudar a equipos de selecci√≥n a gestionar todo el proceso de reclutamiento desde un √∫nico lugar. Su propuesta de valor radica en su **flujo de trabajo visual**, su capacidad de **extraer autom√°ticamente informaci√≥n clave de los CVs**, y su enfoque en la **colaboraci√≥n entre reclutadores y managers** sin fricciones.

A diferencia de soluciones complejas o anticuadas, TalentFlow ofrece una experiencia intuitiva, altamente automatizada, y adaptable a empresas en crecimiento que necesitan agilidad sin sacrificar control.

---

### ‚úÖ **Funciones principales de TalentFlow (explicaci√≥n)**

1. ### **üéØ Gesti√≥n centralizada de candidatos y ofertas**

   Todas las candidaturas se agrupan por oferta de empleo, con una vista clara de los candidatos, su estado en el proceso y acceso directo a su CV, perfil y comunicaciones previas.

2. ### **üìÑ Parsing autom√°tico de CVs**

   El sistema extrae autom√°ticamente datos clave del curr√≠culum (nombre, experiencia, formaci√≥n, habilidades) y construye un perfil estructurado, reduciendo el trabajo manual y permitiendo b√∫squedas m√°s potentes.

3. ### **üìä Pipeline visual y etapas personalizables**

   Un panel estilo *kanban* permite visualizar el estado de cada candidato en el proceso de selecci√≥n. Las etapas son configurables seg√∫n el flujo de cada empresa (ej: CV recibido ‚Üí Entrevista t√©cnica ‚Üí Oferta).

4. ### **üîç B√∫squeda y filtrado inteligente**

   El motor de b√∫squeda permite localizar candidatos por habilidades, experiencia previa o etapa del proceso, incluso dentro de su CV o carta de presentaci√≥n, acelerando el cribado.

5. ### **üí¨ Comunicaci√≥n integrada con candidatos**

   Env√≠o de correos electr√≥nicos directamente desde la plataforma, con plantillas autom√°ticas y seguimiento de respuestas. Todo el historial queda registrado para m√°xima trazabilidad.

6. ### **üë• Colaboraci√≥n en equipo**

   Comentarios internos, asignaci√≥n de responsables por oferta y gesti√≥n de permisos para asegurar que cada miembro del equipo vea solo lo que necesita. Permite una toma de decisiones r√°pida y compartida.

7. ### **üìÜ Programaci√≥n de entrevistas**

   Integraci√≥n con calendarios (Google/Outlook) para coordinar entrevistas f√°cilmente. Env√≠o de invitaciones autom√°ticas con enlaces a videollamada si aplica.

8. ### **üìà Reporting b√°sico de procesos**

   M√©tricas clave como tiempo medio por etapa, conversi√≥n por fuente, o candidatos activos por vacante para ayudar a mejorar el proceso de selecci√≥n continuamente.

## üß© Lean Canvas: TalentFlow ‚Äì ATS √°gil y colaborativo para empresas modernas

| **Bloque**                  | **Contenido**                                                                                                                                                                                                                                                                                           |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. Problema**             | - Reclutadores pierden tiempo con tareas manuales (cribado, emails, programaci√≥n de entrevistas).<br>- Los ATS existentes son complejos, caros o mal adaptados a empresas medianas.<br>- Falta de colaboraci√≥n fluida entre RRHH y managers t√©cnicos.                                                   |
| **2. Segmento de Clientes** | - Equipos de RRHH de empresas medianas (20‚Äì500 empleados).<br>- Startups en fase de crecimiento.<br>- Consultoras de selecci√≥n que manejan m√∫ltiples procesos.                                                                                                                                          |
| **3. Propuesta de Valor**   | **"ATS √°gil, visual y colaborativo que automatiza lo tedioso y potencia el trabajo en equipo"**.<br>- Visual y f√°cil de usar.<br>- Parsing de CVs autom√°tico.<br>- Pipeline personalizable.<br>- Flujo de comunicaci√≥n centralizado.<br>- Ideal para empresas sin equipos t√©cnicos dedicados a HR Tech. |
| **4. Soluci√≥n**             | - Kanban de selecci√≥n intuitivo.<br>- Extracci√≥n autom√°tica de datos del CV.<br>- Comunicaci√≥n con candidatos integrada.<br>- Comentarios y roles para equipos.<br>- Integraci√≥n con calendarios y email.<br>- Reporting b√°sico sin necesidad de analistas.                                             |
| **5. M√©tricas Clave**       | - N¬∫ de vacantes activas creadas.<br>- N¬∫ de usuarios activos por empresa.<br>- Tasa de conversi√≥n en el pipeline.<br>- Tiempo medio hasta contrataci√≥n.<br>- Retenci√≥n mensual (churn).                                                                                                                |
| **6. Ventaja Competitiva**  | - Onboarding ultra-r√°pido: usable en minutos, sin consultor√≠a.<br>- Experiencia UI/UX moderna tipo Trello.<br>- API sencilla para integraci√≥n futura.<br>- Posibilidad de uso gratuito con l√≠mites.                                                                                                     |
| **7. Canales**              | - Marketing de contenido (blog, SEO sobre reclutamiento √°gil).<br>- LinkedIn Ads segmentadas a recruiters y HR.<br>- Alianzas con consultoras de RRHH.<br>- Plataformas como Product Hunt o AppSumo.<br>- Demo gratuita auto-gestionada.                                                                |
| **8. Estructura de Costes** | - Desarrollo y mantenimiento (equipo t√©cnico).<br>- Infraestructura cloud (AWS, GCP, etc.).<br>- Soporte y atenci√≥n al cliente.<br>- Marketing y ventas.<br>- Costes legales (RGPD, contratos).                                                                                                         |
| **9. Fuente de Ingresos**   | - **Modelo SaaS** mensual/anual.<br>  - Plan gratuito: 1 vacante, 1 usuario.<br>  - Plan Pro: 49‚Ç¨/mes (hasta 5 usuarios / 10 vacantes).<br>  - Plan Business: 99‚Ç¨/mes (usuarios ilimitados).<br>  - Add-ons: integraciones, informes avanzados.                                                         |

---

## Casos de uso principales de TalentFlow

## üü¶ **Caso de uso 1: Publicaci√≥n de oferta y recepci√≥n de candidaturas**

### üìå Descripci√≥n:

El reclutador crea una nueva oferta de empleo en el sistema, la publica en distintos portales de empleo (o en su web corporativa), y autom√°ticamente comienza a recibir candidaturas que quedan registradas en el sistema. El sistema parsea los CVs y genera perfiles estructurados para facilitar la evaluaci√≥n posterior.

### ‚úÖ Objetivo:

Facilitar la difusi√≥n de ofertas y automatizar la recopilaci√≥n y organizaci√≥n de candidaturas.

### üîÅ Diagrama Mermaid:

```mermaid
sequenceDiagram
    participant R as Reclutador
    participant S as Sistema ATS
    participant P as Portal de empleo
    participant C as Candidato

    R->>S: Crea nueva oferta de empleo
    S->>P: Publica oferta en portales conectados
    C->>P: Env√≠a candidatura (CV, carta)
    P->>S: Redirige candidatura al sistema
    S->>S: Parseo autom√°tico del CV
    S->>R: Notifica nueva candidatura con perfil estructurado
```

---

## üü¶ **Caso de uso 2: Gesti√≥n del proceso de selecci√≥n**

### üìå Descripci√≥n:

El reclutador gestiona a los candidatos en un pipeline visual, cambiando su estado conforme avanzan en el proceso. Puede dejar comentarios, programar entrevistas e involucrar a managers u otros miembros del equipo para evaluar conjuntamente a los candidatos.

### ‚úÖ Objetivo:

Tener visibilidad clara del estado de cada candidato y tomar decisiones colaborativas.

### üîÅ Diagrama Mermaid:

```mermaid
sequenceDiagram
    participant R as Reclutador
    participant S as Sistema ATS
    participant M as Manager

    R->>S: Visualiza pipeline de una oferta
    R->>S: Mueve candidato a "Entrevista t√©cnica"
    S->>M: Notifica asignaci√≥n de entrevista
    M->>S: Deja feedback sobre el candidato
    R->>S: Revisa comentarios
    R->>S: Mueve candidato a "Finalistas"
```

---

## üü¶ **Caso de uso 3: Comunicaci√≥n con candidatos y automatizaci√≥n**

### üìå Descripci√≥n:

El sistema permite enviar correos directamente a los candidatos desde la interfaz del ATS, usando plantillas predefinidas. Adem√°s, ciertas acciones pueden estar automatizadas (por ejemplo, env√≠o de mensaje de rechazo al mover a un candidato a la etapa ‚ÄúDescartado‚Äù).

### ‚úÖ Objetivo:

Reducir el esfuerzo manual y asegurar una comunicaci√≥n clara y profesional con cada candidato.

### üîÅ Diagrama Mermaid:

```mermaid
sequenceDiagram
    participant R as Reclutador
    participant S as Sistema ATS
    participant C as Candidato

    R->>S: Mueve candidato a etapa "Descartado"
    S->>S: Detecta acci√≥n con automatizaci√≥n activa
    S->>C: Env√≠a email de rechazo con plantilla personalizada
    C->>S: Recibe correo
    S->>R: Guarda registro de la comunicaci√≥n
```

---

# Modelo de base de datos

```mermaid
erDiagram
    User ||--o{ JobOffer : creates
    User ||--o{ Comment : writes
    User ||--o{ Interview : schedules

    JobOffer ||--o{ Application : has
    JobOffer ||--o{ Stage : defines

    Candidate ||--o{ Application : submits
    Candidate ||--o{ Message : receives
    Candidate ||--o{ Attachment : uploads

    Application ||--o{ Interview : includes
    Application ||--o{ Comment : contains
    Application ||--o{ Message : includes
    Application }o--|| Stage : at

    Attachment {
        id INT
        filename STRING
        type STRING
        url STRING
        uploadedAt DATETIME
    }

    User {
        id INT
        name STRING
        email STRING
        role STRING "Values: recruiter, manager, admin"
    }

    JobOffer {
        id INT
        title STRING
        description TEXT
        location STRING
        createdAt DATETIME
        status STRING "Values: open, closed"
    }

    Candidate {
        id INT
        fullName STRING
        email STRING
        phone STRING
        linkedinUrl STRING
        createdAt DATETIME
    }

    Application {
        id INT
        candidateId INT
        jobOfferId INT
        stageId INT
        status STRING "Values: active, rejected, hired"
        appliedAt DATETIME
    }

    Stage {
        id INT
        jobOfferId INT
        name STRING
        order INT
    }

    Interview {
        id INT
        applicationId INT
        scheduledBy INT
        scheduledAt DATETIME
        mode STRING "Values: online, in_person"
        location STRING
        notes TEXT
    }

    Comment {
        id INT
        authorId INT
        applicationId INT
        content TEXT
        createdAt DATETIME
    }

    Message {
        id INT
        applicationId INT
        sender STRING
        recipient STRING
        subject STRING
        body TEXT
        sentAt DATETIME
    }
```

# Arquitectura del sistema

El sistema se concibe como una aplicaci√≥n web multiusuario, escalable y moderna, orientada a ofrecer una experiencia r√°pida y colaborativa.

---

## üèóÔ∏è **Arquitectura de Software: Clean Hexagonal (Ports & Adapters) + Microfrontends**

### ‚öôÔ∏è **Dise√±o general**

* **Tipo de arquitectura:**

  * Backend: Clean Architecture / Hexagonal
  * Frontend: Microfrontend modular
  * Infraestructura: Contenedores (Docker) orquestados con Kubernetes
  * Comunicaci√≥n: REST + Webhooks + Event-driven internal messaging

## üß© **Componentes principales**

### üß† Dominio / N√∫cleo (backend)

* **Domain Layer (Core):**

  * Entidades de negocio puras: `Candidate`, `JobOffer`, `Application`, `Stage`, etc.
  * Servicios de dominio y reglas de negocio.
  * Interfaces (puertos) para infraestructura externa: repositorios, servicios de email, integraciones.

* **Application Layer:**

  * Casos de uso orquestados: crear oferta, mover candidato, agendar entrevista, etc.
  * Controladores de eventos internos (command handlers).
  * Gesti√≥n de transacciones unitarias (UoW).

* **Adapters Layer (inbound/outbound):**

  * Inbound: REST API (OpenAPI), Webhooks (p.ej. para portales de empleo).
  * Outbound: Email service, calendarios externos (Google, Outlook), portales de publicaci√≥n.

---

### üåê Frontend (SPA modular por microfrontend)

* **Aplicaci√≥n React (Next.js o Vite) dividida en dominios funcionales:**

  * `Dashboard`: visualizaci√≥n de vacantes y KPIs
  * `Candidaturas`: pipeline visual tipo Kanban
  * `Oferta`: edici√≥n/publicaci√≥n de ofertas
  * `Entrevistas`: agenda e historial
  * `Configuraci√≥n`: gesti√≥n de usuarios, permisos y etapas

* **Comunicaci√≥n con backend via REST y WebSockets (para tiempo real)**

---

## üîå **Integraciones externas**

| Sistema                                           | M√©todo            | Prop√≥sito                      |
| ------------------------------------------------- | ----------------- | ------------------------------ |
| **Portales de empleo (LinkedIn, InfoJobs, etc.)** | Webhooks + APIs   | Publicar ofertas y recibir CVs |
| **Servicios de correo (SendGrid / Amazon SES)**   | SMTP / REST API   | Env√≠o de comunicaciones        |
| **Calendarios (Google Calendar / Outlook)**       | OAuth2 + REST API | Programaci√≥n de entrevistas    |
| **Evaluaci√≥n t√©cnica (HackerRank, Codility)**     | REST API          | Env√≠o y consulta de pruebas    |
| **Firma digital (DocuSign, Signaturit)**          | REST API          | Firma de ofertas laborales     |

---

## üóÉÔ∏è **Persistencia y almacenamiento**

* **PostgreSQL (RDS / Cloud SQL)**

  * Relacional, ACID, ideal para gesti√≥n de estados e integridad de procesos.
  * Modelo estructurado basado en el ERD anterior.

* **Redis (cach√© y sesiones)**

  * Para mejorar el rendimiento de filtros y b√∫squedas frecuentes.

* **S3-compatible object storage**

  * Para almacenar CVs y archivos adjuntos.

---

## üõ†Ô∏è **Patrones y servicios complementarios**

* **CQRS interno (no full event sourcing):**

  * Commands para mutaciones, Queries optimizadas para lectura.

* **Job Queue (BullMQ o Celery):**

  * Procesamiento de tareas asincr√≥nicas: env√≠o de emails, sincronizaci√≥n externa, generaci√≥n de informes.

* **Event Bus (Kafka / NATS):**

  * Para desacoplar servicios internos y emitir eventos de dominio (`CandidateMovedStage`, `InterviewScheduled`, etc.)

* **Authentication/Authorization:**

  * JWT + Refresh Tokens
  * RBAC con permisos por rol (`admin`, `recruiter`, `manager`)

---

## üß™ **Testing & observabilidad**

* Tests unitarios en core/domain
* Tests de integraci√≥n en adapters
* OpenTelemetry para trazas
* Prometheus + Grafana para m√©tricas
* ELK / Loki para logs

---

## üîê Seguridad

* Autenticaci√≥n segura (OAuth2 + 2FA opcional)
* Validaci√≥n estricta de inputs
* Escaneo de archivos subidos (antivirus/malware)
* Encriptaci√≥n en tr√°nsito (TLS) y en reposo

---

## Diagrama General del sistema

```mermaid
graph TD
  A[Usuario: Reclutador/Manager] --> B[TalentFlow Web App]
  A2[Candidato] -->|Aplica a oferta| B
  B --> C[TalentFlow Backend API]
  C --> D[(PostgreSQL DB)]
  C --> E[(S3 File Storage)]
  C --> F[Redis Cache]
  C --> G[Portales de empleo externos]
  C --> H[Calendario externo]
  C --> I[Servicio de emails]
  C --> J[Evaluadores externos]
  C --> K[Firma electr√≥nica]

```

# Diagrama C4 de la arquitectura del sistema

Este c√≥digo debe copiar y pegarse en [Structurizr](https://structurizr.com/dsl) para poder visualizarlo como un diagrama C4.

```
workspace {

  model {
    user = person "Reclutador/Manager"

    system = softwareSystem "TalentFlow ATS" {
      user -> this "Utiliza para gestionar procesos de selecci√≥n"

      webApp = container "Frontend Web (SPA)" {
        technology "React"
      }

      backend = container "Backend API" {
        technology "Node.js / NestJS"
        description "API central que implementa la l√≥gica de negocio"

        webApp -> backend "Consume API REST"

        restController = component "REST Controllers" {
          technology "NestJS Controllers"
        }

        applicationLayer = component "Application Layer" {
          technology "NestJS Services / UseCases"
        }

        domainLayer = component "Domain Layer" {
          technology "Domain Core (Entities, Services, Ports)"
        }

        adapters = component "Infrastructure Adapters" {
          technology "Adapters externos (PostgreSQL, Email, Webhooks)"
        }

        # Relaciones internas
        restController -> applicationLayer
        applicationLayer -> domainLayer
        applicationLayer -> adapters

        # Nivel 4: C√≥digo del dominio
        candidate = component "Candidate (Entidad)" {
          technology "Entity"
        }

        jobOffer = component "JobOffer (Entidad)" {
          technology "Entity"
        }

        application = component "Application (Entidad)" {
          technology "Aggregate Root"
        }

        stage = component "Stage (Value Object)" {
          technology "Value Object"
        }

        appService = component "ApplicationService" {
          technology "Domain Service"
        }

        stagePolicy = component "StagePolicy" {
          technology "Domain Rule"
        }

        candidateRepo = component "CandidateRepository (Interface)" {
          technology "Port"
        }

        jobOfferRepo = component "JobOfferRepository (Interface)" {
          technology "Port"
        }

        domainLayer -> candidate
        domainLayer -> jobOffer
        domainLayer -> application
        domainLayer -> stage
        domainLayer -> appService
        domainLayer -> stagePolicy
        domainLayer -> candidateRepo
        domainLayer -> jobOfferRepo

        application -> stage
        appService -> application
        appService -> stagePolicy
        appService -> candidateRepo
        appService -> jobOfferRepo
      }

      eventBus = container "Event Bus" {
        technology "Kafka"
        backend -> eventBus
      }

      queue = container "Job Queue" {
        technology "BullMQ + Redis"
        backend -> queue
      }
    }
  }

  views {

    systemContext system {
      include *
      autolayout lr
      title "TalentFlow - System Context"
    }

    container system {
      include *
      autolayout lr
      title "TalentFlow - Containers"
    }

    component backend {
      include restController
      include applicationLayer
      include domainLayer
      include adapters
      autolayout lr
      title "TalentFlow - Componentes del Backend"
    }

    component backend {
      include candidate
      include jobOffer
      include application
      include stage
      include appService
      include stagePolicy
      include candidateRepo
      include jobOfferRepo
      autolayout lr
      title "TalentFlow - Nivel 4: C√≥digo del dominio"
    }

    theme default
  }
}
```